# Тестер емкости аккумуляторов

![Circruit](https://github.com/Viiprogrammer/Battery-Tester/blob/master/Li-ionTester.BMP?raw=true)

Функционал:
  - Измерение емкости акумуляторов Li-ion/Po типа:
    - Выбор тока 0.1-2А с шагом 0.1А
    - Стабилизация тока во время разрядки
    - Полное запоминание выбранных параметров в EEPROM
    - Выставление напряжения окончания теста
    - Возможность предзаряда аккумулятора перед тестом при не полном заряде
   
  - RS-232:
     - Логирование и управление
     - Построение графиков разряда
     
  - Температурная защита при заряде и разряде
  - Зарядка аккумулятора
  - Звуковые оповещения 
  - Пауза
  - Возможность возобновления теста если отключить питание на паузе
  
# Конфигурация и настройка

  ## Калибровка и настроки тестов и заряда в `config.h`
  
  | Defile name   |     Value     |     Type     |
  | ------------- | ------------- | ------------- |
  | V_REF  | Значение опорного напряжения  | FLOAT |
  | ADC_READ_NUM  | Кол-во считываний АЦП для усреднения | CHAR |
  | BATTERY_TEMP_MUX_CHANNEL  | Канал АЦП для датчика температуры АКБ  | INT |
  | COOLER_TEMP_MUX_CHANNEL | Канал АЦП для датчика температуры радиатора эл. нагрузки | INT |
  | VOLTAGE_MUX_CHANNEL | Канал АЦП для измерения напряжения батареи и ее детектирования | INT |
  | CURRENT_MUX_CHANNEL | Канал АЦП для измерения тока при тестер разрядом | INT |
  | AMPERAGE_MAX  | Максимальное значние тока эл нагрузки в мА | INT |
  | AMPERAGE_MIN  | Минимальное значние тока эл нагрузки в мА | INT |
  | AMPERAGE_STEP  | Шаг установки тока нагрузки | INT |
  | COOLER_MIN_PWM  | Значение ШИМ при включение куллера на минимальных оборотах | INT |
  | COOLER_ON_TEMP_VALUE  | Значение АЦП датчика температуры радиатора эл. нагрузки при котором куллер включается на минимальных оборотах | INT|
  | COOLER_OFF_TEMP_VALUE  | Значение АЦП датчика температуры радиатора эл. нагрузки при котором куллер выключается | INT |
  | BATTERY_CRITICAL_TEMP_VALUE  | Значение АЦП датчика температуры акб при котором будет остановлен тест и отключена нагрузка | INT |
  | CHARGE_DIALOG_VALUE  | Напряжение при котором будет выведено предложение зарядки акб перед тестом | FLOAT |
  | CHARGE_TRIGGER_VALUE  | Значение напряжения используемое для дополнителоьной проверки окончания заряда АКБ. Используется как дополнительный метод детектирования окончания заряда вместе с сигналом с TP4056 | FLOAT |
  | BATTERY_ON  | Дефайн подключения батареи к нагрузке | None |
  | BATTERY_OFF  | Дефайн отключения батареи от нагрузки | None |
  | TP4056_ON  | Дефайн включения TP4056 подачей сигнала на CE | None |
  | TP4056_OFF  | Дефайн выключения TP4056 подачей сигнала на CE | None |
  
## Настройка Выводов дисплея в `74hc595.h`
  | Defile name   |     Shift register pin     | 
  | ------------- | ------------- |
  | DATA, DATA_DDR, DATA_PORT  | DS Pin  |
  | SCK, SCK_DDR, SCK_PORT  | SH_CP (SLK) Pin  |
  | LATCH, LATCH_DDR, LATCH_PORT  | ST_CP (LATCH) Pin |
  
  
## Настройка кнопок в `buttons.h`
  
